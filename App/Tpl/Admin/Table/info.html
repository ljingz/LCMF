<extend name="./base_form" />

<block name="title">模型</block>

<block name="content">
	<style type="text/css">
		div.pageFormContent .config label {
			width: auto;
			padding: 0;
			margin: 0 10px 0 0;
			vertical-align: middle;
		}div.pageFormContent .config label input {
			margin: 0 3px 0 0;
			vertical-align: middle;
		}
		table.itemDetail th, table.itemDetail td {
			line-height: 21px;
			padding: 5px;
			vertical-align:top;
		}
		table.itemDetail thead th fieldHtml {
			display: none;
		}
	</style>

	<notempty name="data">
  <input type="hidden" name="table[tableid]" value="{$data.tableid}"/>
  </notempty>
  <div class="pageFormContent nowrap" layoutH="97">
  	<p><strong>基本信息</strong></p>
    <dl>
      <dt>数据表名：</dt>
      <dd>
      	<notempty name="data">
        {$data.name}
        <else/>
        <input type="text" name="table[name]" size="30" class="required lettersonly" minlength="2" maxlength="10"/>
        </notempty>
      </dd>
    </dl>
    <dl>
      <dt>模型名称：</dt>
      <dd>
        <input type="text" name="table[title]" size="30" class="required"/>
      </dd>
    </dl>
    <dl>
      <dt>描述：</dt>
      <dd>
        <input type="text" name="table[description]" size="30"/>
      </dd>
    </dl>
    <div class="divider"></div>
    <p><strong>模型配置</strong></p>
    <dl class="config">
      <dt>数据类型：</dt>
      <dd>
      	<select name="table[type]">
      	<volist name=":data('table','type')" id="value">
					<option value="{$key}">{$value}</option>
				</volist>
				</select>
      </dd>
    </dl>
    <dl class="config">
      <dt>操作：</dt>
      <dd>
        <volist name=":data('table','action')" id="value">
					<label><input type="checkbox" name="table[action][]" value="{$key}" checked/> {$value}</label>
				</volist>
				（仅对列表有效）
      </dd>
    </dl>
    <div class="divider"></div>
    <p><strong>模型字段</strong></p>
    <dl>
    <table width="100%" class="nowrap itemDetail" addButton="添加字段">
			<thead>
				<th type="text" name="field[#index#][name]" size="12" fieldClass="required lettersonly" fieldAttrs="{'minlength':2,'maxlength':10}" width="25%">字段名</th>
				<th type="text" name="field[#index#][title]" size="12" fieldClass="required" fieldAttrs="{'minlength':2,'maxlength':20}" width="25%">标题</th>
				<th type="select" name="field[#index#][element]" fieldClass="required" width="25%">
				<fieldHtml>
				<select>
				<volist name=":data('table','field','element')" id="value">
					<option value="{$key}">{$value.name}</option>
				</volist>
				</select>
				</fieldHtml>
				类型
				</th>
				<th type="select" name="field[#index#][validate]">
				<fieldHtml>
				<select>
				<option value=""></option>
				<volist name=":data('table','field','validate')" id="value">
					<option value="{$value}">{$value}</option>
				</volist>
				</select>
				</fieldHtml>
				验证
				</th>
				<th type="del" width="60">操作</th>
			</thead>
      <tbody>
      	<volist name="field" id="vo">
				<tr class="unitBox">
					<td>
						<input class="required lettersonly textInput" type="text" maxlength="10" minlength="2" size="12" value="{$vo.name}" name="field[0][name]" readonly>
					</td>
					<td>
						<input class="required textInput" type="text" maxlength="20" minlength="2" size="12" value="{$vo.title}" name="field[0][title]">
					</td>
					<td>
						<select class="required" name="field[0][element]">
							<volist name=":data('table','field','element')" id="value">
							<option value="{$key}" <eq name="vo.element" value="$key">selected</eq>>{$value.name}</option>
							</volist>
						</select>
					</td>
					<td>
						<select name="field[0][validate]">
							<option value=""></option>
							<volist name=":data('table','field','validate')" id="value">
							<option value="{$value}" <eq name="vo.validate" value="$value">selected</eq>>{$value}</option>
							</volist>
						</select>
					</td>
					<td>
						<a class="btnDel disabled" href="javascript:void(0)">删除</a>
					</td>
				</tr>
				</volist>
      </tbody>
    </table>
    </dl>
  </div>
</block>